<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE requirement SYSTEM "requirement.dtd">


<requirement id='queue.jdbc' type='NEW' prio='HIGH' status='CLOSED'>
   <topic>
        XmlBlaster provides a generic jdbc plugin for storing queue entries on a database.
    </topic>
    <description>
       <p>The JdbcQueuePlugin offers the ability to store messages persistently on databases. In case
       a crash occurs, data will be recovered.</p>
    </description>

    <example lang="Java" type="HTML">
       These are example QoS of subscribe() invocations:
       <pre>    
&lt;qos>
   &lt;queue maxMsg='10000' maxBytes='1000000000' onOverflow='deadMessage'/>
&lt;/qos>
       </pre>
   </example>
   <configuration where="server">

      <p>
      These parameters allow to configure a jdbc queue
      </p>
      <table border="1">
         <tr>
            <th>Property</th>
            <th>Default</th>
            <th>Description</th>
            <th>Hot</th>
            <th>Impl</th>
         </tr>
         <tr>
            <td>QueuePlugin[JDBC][1.0]</td>
            <td>org.xmlBlaster.util.queue.jdbc.JdbcQueuePlugin</td>
            <td>specifies the jdbc implementing class to be used</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.maxMsg</td>
            <td>1000</td>
            <td>specifies the maximum number of entries allowed in this queue</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.maxBytes</td>
            <td>10485760</td>
            <td>(10MB) specifies the maximum total size allowed in this queue</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>JdbcDriver.mapping[postgres]</td>
            <td>string=text, longint=bigint, int=integer, boolean=char(1), tables=pg_tables, connectionErrorCodes=:1089:17002</td>
            <td>the data types to use for the particular database (defaults to postgres).</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.persistent.connectionPoolSize</td>
            <td>1</td>
            <td>the number of connections to the DB (tests showed that a low number gives the best performance).</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.persistent.connectionBusyTimeout</td>
            <td>90000</td>
            <td>The time to wait in milliseconds until to timeout when waiting for a connection to the DB.</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.persistent.maxWaitingThreads</td>
            <td>300</td>
            <td>The maximum number of threads waiting for a connection to the DB.</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.persistent.tablePrefix</td>
            <td>xmlBlaster</td>
            <td>The prefix to use in the tablenames. All tables used will start with the uppercase of the text specified here. Do not choose 
            names which are too long since many DB have a limited tablename length.</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
         <tr>
            <td>queue.persistent.tableAllocationIncrement</td>
            <td>2</td>
            <td>The number of tables to add if there are no free tables available to associate to a queue.</td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
            <td><img src="ok.gif" border="0" alt="yes" /></td>
         </tr>
        </table>

   </configuration>

   <see type="API">org.xmlBlaster.util.queue.I_Queue</see>
   <see type="API">org.xmlBlaster.util.queue.jdbc.JdbcQueuePlugin</see>
   <see type="API">org.xmlBlaster.util.queue.QueuePluginManager</see>
   <see type="API">org.xmlBlaster.util.queue.I_QueueEntry</see>
   <see type="API">org.xmlBlaster.util.qos.storage.QueuePropertyBase</see>
   <see type="API">org.xmlBlaster.util.I_Plugin</see>
   <see type="API">org.xmlBlaster.util.Global</see>
   <see type="REQ">queue</see>
   <see type="REQ">queue.jdbc.postgres</see>
   <see type="REQ">queue.jdbc.oracle</see>

<!--   <see type="REQ">cluster</see> -->
   <author>laghi@swissinfo.org</author>
   <date>2002 11 16</date>
   <revision>$Revision: 1.7 $</revision>
   <testcase status="CLOSED">
      <name>-</name>
      <comment>-</comment>
      <test tool="SUITE">org.xmlBlaster.test.classtest.queue.I_QueueTest</test>
      <test tool="SUITE">org.xmlBlaster.test.classtest.queue.JdbcQueueTest</test>
   </testcase>
</requirement>

