<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE requirement SYSTEM "requirement.dtd">

<requirement id='engine.qos.subscribe.id' type='NEW' prio='LOW' status="CLOSED">
   <topic>
      On subscribe you can force your own subscription id.
   </topic>
   <description>
     <p>
     Every subscription returns a unique handle namely the subscription ID.
     This is used to refer to exact this subscription on updated messages or
     un unsubscribe requests.
     </p>
     <p>
     This subscription ID is uniquely generated by xmlBlaster. On demand
     you can force xmlBlaster to use a subscription ID which is given by
     the subscriber. This subscription ID should be unique in the whole cluster
     environment, a proposed syntax is:
     </p>
     <pre>
     "__subId:/node/[cluserNodeId]/client/[loginName]/[publicSessionId]/[your number or id]"
     </pre>
     <p>
     Example:
     </p>
     <pre>
&lt;qos> <!-- subscribe QoS -->
   &lt;id>"__subId:/node/heron/client/joe/3/34&lt;/id>
   ...
&lt;/qos>
     </pre>
     <p>
     For java clients there is a praefix constant in org.xmlBlaster.engine.helper.Constants.java
     which you can use to build a unique subscription ID:
     </p>
     <pre>
   public final static String SUBSCRIPTIONID_CLIENT_PRAEFIX = "__subId:/node/";
     </pre>
   </description>
   <example lang="Java">
      <![CDATA[
...

try {
   SubscribeQosWrapper sq = new SubscribeQosWrapper();

   String subId = Constants.SUBSCRIPTIONID_CLIENT_PRAEFIX + serverName +
                  "/client/" + connectQos.getUserId() +
                  "/" + connectRetQos.getPublicSessionId() +
                  "/" + myCounter;

   sq.setSubscriptionId(subId);

   String subId = con.subscribe("<key oid='NOTAM'/>, sq.toXml());
}
catch (Exception e) {
   ...
}
...
      ]]>
   </example>
   <see>org.xmlBlaster.client.SubscribeQosWrapper</see>
   <author>ruff@swand.lake.de</author>
   <hacker>ruff@swand.lake.de</hacker>
   <date>2002 06 26</date>
   <revision>$Revision: 1.1 $</revision>
   <testcase status="CLOSED">
      <name>-</name>
      <comment>-</comment>
      <test tool="SUITE">org.xmlBlaster.test.qos.TestSubNoInitial</test>
   </testcase>
</requirement>

