<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE requirement SYSTEM "requirement.dtd">

<requirement id='engine.qos.subscribe.id' type='NEW' prio='LOW' status="CLOSED">
   <topic>
      On subscribe you can force your own subscription id.
   </topic>
   <description>
     <p>
     Every subscription returns a unique handle namely the subscription ID.
     This is used to refer to exact this subscription on updated messages or
     un unsubscribe requests.
     </p>
     <p>
     This subscription ID is uniquely generated by xmlBlaster. On demand
     you can force xmlBlaster to use a subscription ID which is given by
     the subscriber. This subscription ID should be unique in the whole cluster
     environment, a proposed syntax is:
     </p>
     <pre>
"__subId:/node/[cluserNodeId]/client/[loginName]/[publicSessionId]/[your number or id]"
     </pre>
     <p>
     Example:
     </p>
     <pre>
&lt;qos> <!-- subscribe QoS -->
   &lt;id>"__subId:/node/heron/client/joe/3/34&lt;/id>
   ...
&lt;/qos>
     </pre>
     <p>
     For java clients there is a prefix constant in org.xmlBlaster.util.enum.Constants.java
     which you can use to build a unique subscription ID:
     </p>
     <pre>
   public final static String SUBSCRIPTIONID_CLIENT_PREFIX = "__subId:/node/";
     </pre>
   </description>
   <example lang="Java">
      <![CDATA[
import org.xmlBlaster.client.qos.SubscribeQos;

...

try {
   SubscribeQos sq = new SubscribeQos(glob);

   String subId = Constants.SUBSCRIPTIONID_CLIENT_PREFIX + serverName +
                  "/client/" + connectQos.getUserId() +
                  "/" + connectReturnQos.getPublicSessionId() +
                  "/" + myCounter;

   sq.setSubscriptionId(subId);

   String subId = con.subscribe("<key oid='NOTAM'/>, sq.toXml());
}
catch (Exception e) {
   ...
}
...
      ]]>
   </example>
   <see>org.xmlBlaster.client.qos.SubscribeQos</see>
   <author>xmlBlaster@marcelruff.info</author>
   <hacker>xmlBlaster@marcelruff.info</hacker>
   <date>2002 06 26</date>
   <revision>$Revision: 1.6 $</revision>
   <testcase status="CLOSED">
      <name>-</name>
      <comment>-</comment>
      <test tool="SUITE">org.xmlBlaster.test.qos.TestSubId</test>
   </testcase>
</requirement>

