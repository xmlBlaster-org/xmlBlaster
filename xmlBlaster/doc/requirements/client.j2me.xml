<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE requirement SYSTEM "requirement.dtd">


<requirement id='client.j2me' type='NEW' prio='LOW' status='CLOSED'>
   <topic>
      XmlBlaster provides a tiny java client library for j2me MIDgets
   </topic>
   <description>
     <p>
     If you develop j2me applications you can connect with our tiny client java library which
     is specific to applets and j2me applications.
     
     </p>
     <h2>Features</h2>
     <ul>
        <li> Supports complete xmlBlaster access including <i>real time</i> asynchronous
             callbacks.</li>

        <li> The communication protocol is based on a persistent http connection which is used
             to push back callback messages</li>

        <li> Reports exceptions nicely back to the client</li>
    </ul>

     <h2>Overview</h2>
     <p>
     The following illustration shows a typical use case, a MIDlet running for example in a
     cellular phone or in a PAD contacts the Web Server, for example 
     <a href="http://www.apache.org/" target="others">Apache</a>,
     which directs the call to a servlet engine with xmlBlasters communication servlet.
     The servlet looks at the applet request and opens a connection to xmlBlaster to
     delegate the request.
     <p>
     Supported MIDget methods are
     </p>
     <ul>
     <li>for connecting read the <a href="interface.connect.html">connect interface</a></li>
     <li>for disconnecting read the <a href="interface.disconnect.html">disconnect interface</a></li>
     <li>for erasing read the  <a href="interface.erase.html">erase interface</a></li>
     <li>for getting read the  <a href="interface.get.html">get interface</a></li>
     <li>for publishing read the  <a href="interface.publish.html">publish interface</a></li>
     <li>for subscribing read the  <a href="interface.subscribe.html">subscribe interface</a></li>
     <li>for unsubscribing read the  <a href="interface.unSubscribe.html">unSubscribe interface</a></li>
     <li>for callbacks read the  <a href="interface.update.html">update interface</a></li>
     </ul>
     </p>

     <h2>Online demo</h2>
     <p>
     If your mobile supports MIDlets, try it online with this URL:
     <code>http://www.xmlblaster.org/xmlBlaster/demo/j2me/SystemInfo.jad</code>
     </p>
   </description>

   <example type="HTML">
   <p>There is a little demo showing the way this works. The demo SystemInfo has the same 
   functionality as the SystemInfoApplet. In order to be run it needs a running xmlBlaster (with
   the xmlrpc port redirected or disactivated), a SystemInfoPublisher which publishes on the 
   given xmlBlaster and a servlet engine running (for example apache's tomcat). If you don't
   want to bother about configuring and starting these, you can use the ones which constantly run
   on the xmlBlaster server. The url of the servlet is 
   <i>http://www.xmlBlaster.org:8080/xmlBlaster/AppletServlet</i>.
   </p>
   <p>
   If you have access to an embedded device which supports j2me (and more precisely CLDC-1.1 and
   MIDP-2.0 profile) you can download the precompiled demo application directly from the xmlBlaster server:<br/>
   <ul>
     <li><a href="http://www.xmlBlaster.org/xmlBlaster/demo/j2me/SystemInfo.jad">SystemInfo.jad</a></li>
     <li><a href="http://www.xmlBlaster.org/xmlBlaster/demo/j2me/SystemInfo.jar">SystemInfo.jar</a></li>
   </ul>
   </p>
   And you can then run the application (check/adjust the URL in SystemInfo.jad before).
   <p>
   If you are not that lucky of having such a device you still can try this demo out by using an
   emulator. You can download sun's j2me development kit which allows you to compile the 
   applications yourself. You can find it at 
   <a href="http://java.sun.com/products/j2mewtoolkit/download-2_1.html">Sun's j2me pages</a>.
   Once you have downloaded it install it in a directory of your choice. Lets say you 
   install it on ${J2ME_HOME}.<br/>
   To compile the application you then invoke:<br/>
   <pre>
   build -DJ2ME_HOME=${J2ME_HOME} j2me
   </pre>
   to run the application run:
   <pre>
   ${J2ME_HOME}/bin/emulator -Xdescriptor ${XMLBLASTER_HOME}/demo/j2me/SystemInfo.jad
   </pre>
   and an application similar to this should appear:<br/>
   <center><img src="j2meDemo.jpg" name="j2meDemo" align="center" border="1"/></center>
   </p>   
   <p>   
   NOTE: If you want to deploy it on your own Webserver you need to add the
   URL which points to the <code>SystemInfo.jar</code> file and to the servlet which
   forwards the requests to the xmlBlaster server:
   <pre>
   build -DJ2ME_HOME=/opt/WTK2.1 
         -DMIDlet-Jar-URL=http://myServer/j2me/SystemInfo.jar
         -DMIDlet-servletUrl=http://myServer:8080/xmlBlaster/AppletServlet
       j2me
   </pre>
   and copy the <code>xmlBlaster/demo/j2me/SystemInfo.jar</code> file to be available there.
   The above URL will be added to the <code>xmlBlaster/demo/j2me/SystemInfo.jad</code> file.<br />
   The servlet is created with the <code>deploy_war</code> task, see the configuration
   in <code>xmlBlaster/demo/http/WEB-INF/web.xml</code>.
   </p>
   </example>

   <example type="HTML">
   <h3>Quick start installation of the server side stuff (if you want the server to be run locally)</h3>
   <p>
   You can try it with tomcat locally (no apache is necessary,
   i had tomcat 3.2.4, 4.1.29 and 5.0.14 to test it, others should work as well):
   </p>
   <h3>
   1. Create a war file:
   </h3>
<pre>
  cd xmlBlaster

  build  -DTOMCAT_HOME=/opt/jakarta_tomcat   deploy_war
</pre>
   <p>
   Set TOMCAT_HOME to point to your installation and the <code>xmlBlaster.war</code>
   will be automatically deployed to <code>$TOMCAT_HOME/webapps/xmlBlaster.war</code>
   </p>
   <h3>
   2. Start it (keep port 8080 free for tomcat)
   </h3>
   <pre>
  java org.xmlBlaster.Main -plugin/xmlrpc/port 8081   
  
  java  http.dhtml.systemInfo.SystemInfoPublisher

 cd $TOMCAT_HOME
 startup.sh
   </pre>

   <h3>Edit your SystemInfo.jad file and change the property 'servletUrl' to:</h3>
   <pre>
http://localhost:8080/xmlBlaster/AppletServlet
   </pre>
   </example>

   <configuration where="server">
      If you want to setup an http server from which be able to download your application, you have to
      make sure the server recognizes the jad and the jar files as mimetypes.  For an apache server this
      means that the configuration file (default httpd.conf) contains the lines:
      <pre>
AddType text/vnd.sun.j2me.app-descriptor .jad
AddType application/java-archive .jar
      </pre>
      and then restart the apache server. More about "Over The Air" (OTA) Provisioning
      can be found <a href="http://developers.sun.com/techtopics/mobility/allarticles/#ota">here</a>.
   </configuration>					

   <see type="API">org.xmlBlaster.client.protocol.http.common.I_XmlBlasterAccessRawBase</see>
   <see type="REQ">interface</see>
   <see type="REQ">client.browser</see>
   <see type="REQ">client.java.applet</see>
   <see type="INTERNET">http://jakarta.apache.org/tomcat/</see>
   <see type="INTERNET">http://www.xmlBlaster.org:8080/xmlBlaster/index.html</see>
   <see type="INTERNET">http://www.xmlBlaster.org:8080/xmlBlaster/HelloWorld3.html</see>
   <see type="INTERNET">http://www.xmlBlaster.org:8080/xmlBlaster/SystemInfoApplet.html</see>

<!--   <see type="REQ">cluster</see> -->
   <author><a href="mailto:laghi@swissinfo.org">Michele Laghi</a></author>
   <date>2004 04 01</date>
   <revision>$Revision: 1.6 $</revision>

   <testcase status="OPEN">
      <name>-</name>
      <comment>-</comment>
   </testcase>
</requirement>

