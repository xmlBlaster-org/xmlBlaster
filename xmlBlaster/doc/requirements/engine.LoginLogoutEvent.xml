<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE requirement SYSTEM "requirement.dtd">

<requirement id='engine.LoginLogoutEvent' type='NEW' prio='LOW' status="CLOSED">
   <topic>Clients can be notified about other clients login or logout events</topic>
   <description>
      There are two internal messages which hold login and logout events. 
      You can subscribe to "<tt>__sys__Login</tt>" to be notified when a new client logs in,
      and to "<tt>__sys__Logout</tt>" to be notified when a client logs out.
      The message content contains the login name of this client.
      <p>
         The public Session Id is passed in the client properties with the key "<tt>__publicSessionId</tt>",
         it is of type <tt>long</tt>. Further the absolute, cluster wide unique name is available
         with the key "<tt>__absoluteName</tt>", it is of type <tt>String</tt>.
      </p>
   </description>
   <example lang="Java" type="HTML">
   <p>The following Java code snippet shows the access to the client login events:</p>
<pre>
// subscribe on login events:
String xmlKey = "&lt;key oid='__sys__Login' queryType='EXACT'>&lt;/key>";
String qos = "&lt;qos>&lt;/qos>";
try {
   xmlBlaster.subscribe(xmlKey, qos);
} catch(XmlBlasterException e) {
}

...

// in the update() method you receive a message on client login:
// Example for a client session "/node/heron/client/joe/2":

// Access "joe"
String loginName = new String(content);

// Access "2"
long publicSessionId = updateQos.getClientProperty("__publicSessionId", 0L);
System.out.println("Client " + loginName + " logged in with session " + publicSessionId);

// Access "/node/heron/client/joe/2"
String absoluteName = updateQos.getClientProperty("__absoluteName", "");
System.out.println("Client is '" + absoluteName + "'");
</pre>
   </example>
   <see type="REQ">admin</see>
   <see type="REQ">admin.events</see>
   <author>xmlBlaster@marcelruff.info</author>
   <date>2000 03 25</date>
   <revision>$Revision: 1.5 $</revision>
   <testcase status="CLOSED">
      <name>-</name>
      <comment>-</comment>
      <test tool="SUITE">org.xmlBlaster.test.authentication.TestLoginLogoutEvent</test>
   </testcase>
</requirement>

