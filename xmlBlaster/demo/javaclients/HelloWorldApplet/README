NOTE:

  This applet is not functional yet!


Start applet as application:
============================

   jaco org.xmlBlaster.MainGUI

   jaco javaclients.HelloWorldApplet.HelloWorld



Start applet in appletviewer:
=============================

  Start the naming service (IOR into your www servers document root):

     xmlBlaster/bin/ns $DOCUMENT_ROOT/NS_Ref

  Start the appligator (applet http tunneling):

     xmlBlaster/bin/appligator 7777 $DOCUMENT_ROOT/Appligator_Ref

  Start xmlBlaster server:

     java -jar lib/xmlBlaster.jar

  Start the applet:

     xmlBlaster/bin/jacapplet HelloWorld.html



Start applet in netscape:
=========================

 1) Setup Apache DocumentRoot:

   cd /usr/local/apache/htdocs
   ln -s $XMLBLASTER_HOME/demo/javaclients/HelloWorldApplet/HelloWorld.html HelloWorld.html
   ln -s $XMLBLASTER_HOME/classes/javaclients javaclients
   cd org
   ln -s $XMLBLASTER_HOME/classes/org/xmlBlaster xmlBlaster


 2) Start xmlBlaster server:

   jaco org.xmlBlaster.MainGUI


 3) Start applet:

    Leads to security exception. Reason not yet analyzed.

       netscape.security.AppletSecurityException: security.checkpropsaccess.key
        at netscape.security.AppletSecurity.checkPropertyAccess(AppletSecurity.java:484)
        at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:958)
        at java.lang.System.getProperty(System.java:456)
        at org.omg.CORBA.ORB.init(ORB.java:37)
      * at org.xmlBlaster.client.protocol.corba.I_XmlBlasterAccess.<init>(I_XmlBlasterAccess.java:60)
        at javaclients.HelloWorldApplet.HelloWorld.setUp(HelloWorld.java:128)

    The JacORB mtclient.html example works well, so it must be possible.




______________________________________________

E:\>echo %PATH%
c:\jdk1.2.2\bin;c:\JacORB1_1\bin;E:\WINNT\system32;E:\WINNT;D:\WINDOWS;D:\WI
NDOWS\SYSTEM;F:\MSSQL7\BINN;c:\ant\bin


E:\>echo %CLASSPATH%
c:\JacORB1_1\classes;c:\ant\lib\ant.jar;c:\JacORB1_1\lib\idl.jar;c:\JacORB1_
1\lib\jacorb.jar;c:\jdk1.2.2\lib\tools.jar;.


E:\>appletviewer -J-Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB -J-Dorg.omg.CORBA
.ORBSingletonClass=org.jacorb.orb.ORBSingleton http://localhost/Jacorb/test.html
java.lang.NoClassDefFoundError: org/omg/CosNaming/NamingContextOperations
        at java.lang.Class.newInstance0(Native Method)
        at java.lang.Class.newInstance(Class.java:241)
        at sun.applet.AppletPanel.createApplet(AppletPanel.java:508)
        at sun.applet.AppletPanel.runLoader(AppletPanel.java:444)
        at sun.applet.AppletPanel.run(AppletPanel.java:282)
        at java.lang.Thread.run(Thread.java:479)


E:\>appletviewer -J-cp -Jc:\JacORB1_1\lib\jacorb.jar -J-Dorg.omg.CORBA.ORBCl
ass=org.jacorb.orb.ORB -J-Dorg.omg.CORBA.ORBSingletonClass=org.jacorb.orb.ORBSinglet
on http://localhost/Jacorb/test.html
Initializing the ORB
Could not read local jacorb properties.
Reading properties from url:http://localhost/Jacorb/jacorb.properties
Could not read properties from URL, reason:
java.security.AccessControlException
: access denied (java.net.SocketPermission 127.0.0.1:80 connect,resolve)
Exception
java.lang.RuntimeException: Appligator not reachable! Check configuration



E:\>appletviewer -J-Xbootclasspath:c:\JacORB1_1\lib\jacorb.jar;c:\jdk1.2.2\j
re\lib\rt.jar -J-Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB -J-Dorg.omg.CORBA.OR
BSingletonClass=org.jacorb.orb.ORBSingleton http://localhost/Jacorb/test.html
Initializing the ORB
Could not read local jacorb properties.
Reading properties from url:http://localhost/Jacorb/jacorb.properties
Setting sum to 0
Incrementing
Avg Ping = 22.212 msecs
Sum = 1000




=============================================================================
Subject:
                  [jacorb-developer] Returning the favor
           Date:
                  Fri, 09 Jun 2000 15:14:55 -0600
          From:
                  Jason Wheeler <jwheeler@accucode.com>
 Organization:
                  AccuCode Inc
             To:
                  jacorb-developer@lists.spline.inf.fu-berlin.de




Group,

I've posted quite a few questions here,  and have always received a
quick response.  I first would like to say thank.  I would also like to
return the favor.  I have worked through quite allot of issues and
though I would post what I've found in hopes that it would be of value.

1.   Running JacORB 1.1 clients in IE 5 (works with beta 15)

Add:

        "-Xbootclasspath/p:c:\jacorb\lib\jacorb.jar" to the plug-in parameters
(change path to match yours)

This prepends the JacORB classes to the vm.  Even though the 1.1 works
with Sun's orb running as an application it fails as an applet.  I
didn't supply the "-Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB
-Dorg.omg.CORBA.ORBSingletonClass=org.jacorb.orb.ORBSingleton" parameter
although you probably could.  You could also change the path in the
parameter to an HTTP address if you wanted to DL the jacorb.jar from a
web server (I haven't tried this) instead of locally as list above.

My code is using quite a few CallBack Objects.  This proved to be quite
a challenge to overcome the security restriction on applets( especially
IE 5).




2.   Using CallBack patterns in applets under IE 5

Add this to applet's init():

     "java.lang.RuntimePermission rtPerm = new
java.lang.RuntimePermission("modifyThread");
     "java.net.SocketPermission sktPerm = new
java.net.SocketPermission(*.*.*.*:1024-,
"accept,connect,listen,resolve")"

Create a policy file (plain text)

        grant codeBase "http://your.URL/*"{
                permission java.security.AllPermission;
        };
Put the policy class in the applet dir on the web server.

Add
        "-Djava.security.manager
-Djava.security.policy=http://your.URL/yourpolicyfilename.policy" to the
plug-in.


The code added to the applet's init() simple tells the Security Manger
to allow the permission listed.  The policy file you create is DL'ed
from web server (by means of the plug-in parameter) and appended to VM's
security policy.  If you don't want to make all the changes you can
still try this by doing the following:

On the client machine.

        open the java.policy file under {java.home}\security\

Add before "Grant {"

        grant codeBase "http://your.URL/*"{
        permission java.security.AllPermission;
        };

Add after "Grant {"

        "permission java.net.SocketPermission "*.*.*.*:1024-,
"accept,connect,listen,resolve";
        "permission java.lang.RuntimePermission "modifyThread";

That's it!

I modified the "permission java.net.SocketPermission "localhost:1024-,
"listen";

to:
        "permission java.net.SocketPermission "*.*.*.*:1024-,
"accept,connect,listen,resolve";

I don't know if this is required!

I hope this helps


--
Jason Wheeler
Systems Engineer
AccuCode Inc
(801) 798-2544 Office
(801) 798-2580 Fax
jwheeler@accucode.com
